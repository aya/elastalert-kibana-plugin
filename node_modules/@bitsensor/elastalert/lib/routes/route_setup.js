'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = setupRouter;

var _lodash = require('lodash');

var _lodash2 = _interopRequireDefault(_lodash);

var _logger = require('../common/logger');

var _logger2 = _interopRequireDefault(_logger);

var _routes = require('./routes');

var _routes2 = _interopRequireDefault(_routes);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var logger = new _logger2.default('Router');

function setupRouter(express) {
  _routes2.default.forEach(function (route) {

    if (_lodash2.default.isArray(route.method)) {
      route.method.forEach(function (method, index) {
        _setupRoute(_lodash2.default.merge(_lodash2.default.cloneDeep(route), {
          method: method,
          handler: route.handler[index]
        }));
      });
    } else {
      _setupRoute(route);
    }
  });

  function _setupRoute(route) {
    var methodFunctionName = route.method.toLowerCase();
    express[methodFunctionName]('/' + route.path, route.handler);
    logger.info('Listening for ' + route.method + ' request on /' + route.path + '.');
  }
}